# P3-2.1 SPIRE Minimal Install Evidence (20250907_044931)

## Deployment Status
```
NAME                    READY   STATUS    RESTARTS        AGE
pod/spire-agent-jmqj8   1/1     Running   0               43s
pod/spire-server-0      1/1     Running   3 (2m55s ago)   3m16s

NAME                   TYPE        CLUSTER-IP    EXTERNAL-IP   PORT(S)    AGE
service/spire-server   ClusterIP   10.96.54.12   <none>        8081/TCP   42m

NAME                         DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR   AGE
daemonset.apps/spire-agent   1         1         1       1            1           <none>          42m

NAME                            READY   AGE
statefulset.apps/spire-server   1/1     42m
```

## Pods
```
NAME                READY   STATUS    RESTARTS        AGE     IP           NODE          NOMINATED NODE   READINESS GATES
spire-agent-jmqj8   1/1     Running   0               43s     172.18.0.6   kind-worker   <none>           <none>
spire-server-0      1/1     Running   3 (2m55s ago)   3m16s   10.244.0.9   kind-worker   <none>           <none>
```

## Server logs (last 30 lines)
```
time="2025-09-06T19:47:05Z" level=warning msg="JWT key slot unusable" error="no key manager key" issued_at="2025-09-06 19:46:18 +0000 UTC" local_authority_id=bV6AexHguN9eXaoz0EHW1Rq0jayPcfzI slot=A status=ACTIVE subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=warning msg="JWT key slot unusable" error="no key manager key" issued_at="2025-09-06 19:46:18 +0000 UTC" local_authority_id=H0EhKZE1A494ePNZPlWcqfinYgcfNqC3 slot=A status=ACTIVE subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=warning msg="JWT key slot unusable" error="no key manager key" issued_at="2025-09-06 19:45:51 +0000 UTC" local_authority_id=HyCvohkIaNugRHWGwAvNlTHzzdmeS5EU slot=A status=ACTIVE subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=warning msg="JWT key slot unusable" error="no key manager key" issued_at="2025-09-06 19:45:09 +0000 UTC" local_authority_id=RrCEEo6OG18n2s8x52bnr3JHtM2tS7QW slot=A status=ACTIVE subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=warning msg="JWT key slot unusable" error="no key manager key" issued_at="2025-09-06 19:44:42 +0000 UTC" local_authority_id=46zRxp0ZaeJgWUC2nLKtJO1skj1Zo5iQ slot=A status=ACTIVE subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=warning msg="JWT key slot unusable" error="no key manager key" issued_at="2025-09-06 19:44:23 +0000 UTC" local_authority_id=LTuFcF7sm6NwEQAvzx5r0hQmw5ASwEe4 slot=A status=ACTIVE subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=warning msg="JWT key slot unusable" error="no key manager key" issued_at="2025-09-06 19:44:22 +0000 UTC" local_authority_id=K5NbVHLdSdIpcEBnNrzCkYUaNsdV6Rob slot=A status=ACTIVE subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=debug msg="Preparing X509 CA" slot=A subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=info msg="Creating a new CA journal entry" subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=debug msg="Successfully stored CA journal entry in datastore" ca_journal_id=9 local_authority_id= subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=info msg="X509 CA prepared" expiration="2025-09-07 07:47:05 +0000 UTC" issued_at="2025-09-06 19:47:05.150302011 +0000 UTC" local_authority_id=b320caa2a6cf9b1b064c3138228f5feba1a553ae self_signed=true slot=A subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=info msg="X509 CA activated" expiration="2025-09-07 07:47:05 +0000 UTC" issued_at="2025-09-06 19:47:05.150302011 +0000 UTC" local_authority_id=b320caa2a6cf9b1b064c3138228f5feba1a553ae slot=A subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=debug msg="Successfully stored CA journal entry in datastore" ca_journal_id=9 local_authority_id=b320caa2a6cf9b1b064c3138228f5feba1a553ae subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=debug msg="Successfully rotated X.509 CA" subsystem_name=ca_manager trust_domain_id="spiffe://example.org" ttl=43199.846009781
time="2025-09-06T19:47:05Z" level=debug msg="Preparing JWT key" slot=A subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=debug msg="Successfully stored CA journal entry in datastore" ca_journal_id=9 local_authority_id=b320caa2a6cf9b1b064c3138228f5feba1a553ae subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=info msg="JWT key prepared" expiration="2025-09-07 07:47:05.154008386 +0000 UTC" issued_at="2025-09-06 19:47:05.154008386 +0000 UTC" local_authority_id=Ow0F65oUccU0hNgzgnSVZPeGcHsuatYz slot=A subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=info msg="JWT key activated" expiration="2025-09-07 07:47:05.154008386 +0000 UTC" issued_at="2025-09-06 19:47:05.154008386 +0000 UTC" local_authority_id=Ow0F65oUccU0hNgzgnSVZPeGcHsuatYz slot=A subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=debug msg="Successfully stored CA journal entry in datastore" ca_journal_id=9 local_authority_id=b320caa2a6cf9b1b064c3138228f5feba1a553ae subsystem_name=ca_manager
time="2025-09-06T19:47:05Z" level=debug msg="Rotating server SVID" subsystem_name=svid_rotator
time="2025-09-06T19:47:05Z" level=debug msg="Signed X509 SVID" expiration="2025-09-06T20:47:05Z" spiffe_id="spiffe://example.org/spire/server" subsystem_name=svid_rotator
time="2025-09-06T19:47:05Z" level=info msg="Building in-memory entry cache" subsystem_name=endpoints
time="2025-09-06T19:47:05Z" level=info msg="Completed building in-memory entry cache" subsystem_name=endpoints
time="2025-09-06T19:47:05Z" level=debug msg="Initializing API endpoints" subsystem_name=endpoints
time="2025-09-06T19:47:05Z" level=info msg="Starting Server APIs" address=/tmp/spire-server/private/api.sock network=unix subsystem_name=endpoints
time="2025-09-06T19:47:05Z" level=info msg="Starting Server APIs" address="[::]:8081" network=tcp subsystem_name=endpoints
time="2025-09-06T19:47:06Z" level=debug msg="Initializing health checkers" subsystem_name=health
time="2025-09-06T19:47:06Z" level=info msg="Serving health checks" address="0.0.0.0:8080" subsystem_name=health
time="2025-09-06T19:47:06Z" level=debug msg="Notifier handled event" event="bundle loaded" notifier=k8sbundle subsystem_name=ca_manager
time="2025-09-06T19:48:51Z" level=info msg="Agent attestation request completed" address="10.244.0.1:2715" agent_id="spiffe://example.org/spire/agent/k8s_psat/demo-cluster/d4b00d3d-ca8e-4acd-a70f-c7af8c5c84d8" authorized_as=nobody authorized_via= caller_addr="10.244.0.1:2715" method=AttestAgent node_attestor_type=k8s_psat request_id=9fb6fe71-d71c-42a4-8c12-f8f2be1d9f55 service=agent.v1.Agent subsystem_name=api
```

## Agent logs (last 30 lines)
```
time="2025-09-06T19:48:50Z" level=info msg="Creating spire agent UDS directory" dir=/tmp/spire-agent/public
time="2025-09-06T19:48:50Z" level=warning msg="Current umask 0022 is too permissive; setting umask 0027"
time="2025-09-06T19:48:50Z" level=info msg="Starting agent with data directory: \"/run/spire\""
time="2025-09-06T19:48:50Z" level=info msg="Plugin loaded" external=false plugin_name=k8s_psat plugin_type=NodeAttestor subsystem_name=catalog
time="2025-09-06T19:48:50Z" level=info msg="Plugin loaded" external=false plugin_name=memory plugin_type=KeyManager subsystem_name=catalog
time="2025-09-06T19:48:50Z" level=info msg="Plugin loaded" external=false plugin_name=k8s plugin_type=WorkloadAttestor subsystem_name=catalog
time="2025-09-06T19:48:50Z" level=info msg="Bundle is not found" subsystem_name=attestor
time="2025-09-06T19:48:50Z" level=debug msg="No pre-existing agent SVID found. Will perform node attestation" subsystem_name=attestor
time="2025-09-06T19:48:50Z" level=info msg="SVID is not found. Starting node attestation" subsystem_name=attestor
time="2025-09-06T19:48:50Z" level=warning msg="Insecure bootstrap enabled; skipping server certificate verification" subsystem_name=attestor
time="2025-09-06T19:48:51Z" level=info msg="Node attestation was successful" rettestable=true spiffe_id="spiffe://example.org/spire/agent/k8s_psat/demo-cluster/d4b00d3d-ca8e-4acd-a70f-c7af8c5c84d8" subsystem_name=attestor
time="2025-09-06T19:48:51Z" level=debug msg="Bundle added" subsystem_name=svid_store_cache trust_domain_id=example.org
time="2025-09-06T19:48:51Z" level=info msg="Starting Workload and SDS APIs" address=/tmp/spire-agent/public/api.sock network=unix subsystem_name=endpoints
time="2025-09-06T19:48:51Z" level=debug msg="Initializing health checkers" subsystem_name=health
time="2025-09-06T19:48:51Z" level=info msg="Serving health checks" address="0.0.0.0:8080" subsystem_name=health
```

## Manifest files created
```
total 40
drwxr-xr-x@ 7 hiraku  staff   224  9  7 04:44 .
drwxr-xr-x@ 8 hiraku  staff   256  9  7 04:00 ..
-rw-r--r--@ 1 hiraku  staff    86  9  7 04:00 quickstart_source.txt
-rw-r--r--@ 1 hiraku  staff  3033  9  7 04:48 spire-agent.yaml
-rw-r--r--@ 1 hiraku  staff    62  9  7 04:04 spire-namespace.yaml
-rw-r--r--@ 1 hiraku  staff  1195  9  7 04:44 spire-server-fixed.yaml
-rw-r--r--@ 1 hiraku  staff  3458  9  7 04:44 spire-server.yaml
```
