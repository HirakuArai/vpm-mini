## 6. Execution Policy（ソース改修の実行主体）

Phase 3 以降、ソースコードやインフラ設定の改修については、次のポリシーを標準ルートとする。

### 6.1 標準ルート：仕様 → エージェント実行 → PR → 人間レビュー

1. ChatGPT / Planner が「何を・なぜ変えるか」を文章で整理し、仕様（What/Why）として残す。
2. その仕様をもとに、**Codex / LLMリレー / VM Codex 向けの「実行指示書」**を作成する。
3. エージェント（Codex / VM）が、
   - ローカル Mac や VM 上で実行し、
   - 変更内容をログに残しつつ、
   - PR として GitHub に反映する。
4. 人間（啓さん）は、
   - PR のレビュー（意味・整合性・リスクのチェック）
   - マージ判断
   に専念する。

### 6.2 例外ルート：緊急 Hotfix

次の条件を満たす場合に限り、人間が直接ファイルを編集してよい。

- SLO や本番運用に影響する緊急障害であり、
- エージェント経由だと復旧が大きく遅れると判断されるとき

その場合でも、

- 直接編集後に必ず PR またはコミットコメントで理由を明記し、
- 必要に応じて `STATE/current_state.md` や `reports/**` に
  「なぜ例外ルートを使ったか」を一言記録する。

### 6.3 レビューの役割分担

- 人間（啓さん）は、レビューにおいて
  - ゴールとの整合性（EG-Space / North Star との一貫性）
  - リスク・副作用
  - ドメイン知識（ビジネスロジック）
  に集中する。
- コーディングスタイルや細かい記法は、
  - エージェント側の生成
  - 自動フォーマッタ / Lint
  に任せる。

### 6.4 権限と実行環境の境界（現状 → 将来）

- 現状（Phase 2〜3 前半）：
  - ローカル Mac 上の Codex が「補助的な実行者」として動き、vpm-mini のソース改修や Git 操作を代行する。
- 将来（Phase 3 後半〜4）：
  - 書き込み権限を持つレーンを、VM Codex や LLMリレーなど **限定された実行環境**に集約する。
  - ローカル Mac は、
    - 一時的な検証
    - 緊急時のバックアップ
    の位置づけとし、通常運用からは徐々に切り離す。

このポリシーにより、

- 「仕様は ChatGPT / Planner が書く」
- 「実行はエージェントが行う」
- 「人間はレビューと判断に集中する」

という役割分担を Phase 3 の基本形とする。
